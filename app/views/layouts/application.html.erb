<!DOCTYPE html>
<html>
<head>
  <title>CodeCache</title>
  <%= stylesheet_link_tag    "application", media: "all", "data-turbolinks-track" => true %>
  <%= csrf_meta_tags %>
<style type="text/css" media="screen">
    #editor { 
        width:100%;
        height:100px;
    }

    html, body {
    height: 100%;
    margin: 0px;
    padding: 0px;
}

#wrapper {
    height: 100%;
    margin: auto;
    position: relative;
}

#header {
    height: 40px;
}

#content {
    position:absolute;
    bottom:0px;
    top: 40px;
    width:100%;
    overflow: auto;
}
#snippet_title, #snippet_language{
    font-size:18px;
    line-height:24px;
}
</style>
</head>
<body data-no-turbolink>

<div id="wrapper">
<%= yield %>
</div>

<%= javascript_include_tag "application", "data-turbolinks-track" => true %>
<script src="//cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
<script>
    $(function(){
        var editor = ace.edit("editor");
        var language = $('#snippet_language').val();

        //editor.setTheme("ace/theme/monokai");
        if (language){
            editor.getSession().setMode("ace/mode/" + language); 
        }
        editor.getSession().on('change', function(e) {
            $('#snippet_content').val(editor.getValue());
        });

        function resizeAce(){
            $('#editor').height($('#content').height() - 40);
        }
        $( window ).resize(function() {
            resizeAce()
        });
        resizeAce()
    });
</script>
</body>
</html>
